<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>香山 & 黄山 实时天气</title>
    <style>
        body{margin:0;overflow:hidden;background:linear-gradient(45deg,#4158D0,#C850C0,#FFCC70,#FBAB7E,#F7CE68);background-size:400%;animation:g 18s ease infinite;font-family:Arial,sans-serif;}
        @keyframes g{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
        #particles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;}
        .container{max-width:1000px;margin:20px auto;padding:20px;display:flex;gap:30px;justify-content:center;flex-wrap:wrap;}
        .card{background:rgba(255,255,255,0.95);border-radius:28px;padding:30px;width:420px;box-shadow:0 20px 50px rgba(0,0,0,0.3);backdrop-filter:blur(10px);}
        h1{text-align:center;color:#1e40af;font-size:2.8em;margin:20px 0;}
        .location{font-size:28px;color:#1e40af;text-align:center;margin-bottom:15px;font-weight:bold;}
        .current{font-size:48px;color:#d946ef;font-weight:bold;text-align:center;margin:10px 0;}
        .info{font-size:20px;color:#333;line-height:2;text-align:center;}
        .forecast{margin-top:20px;}
        .day{display:flex;justify-content:space-between;background:rgba(0,0,0,0.05);padding:12px 16px;margin:8px 0;border-radius:12px;font-size:18px;}
        .back-btn{position:fixed;top:20px;left:20px;background:#fff;color:#1e40af;padding:12px 24px;border-radius:50px;font-size:18px;box-shadow:0 5px 15px rgba(0,0,0,0.3);text-decoration:none;z-index:999;}
    </style>
</head>
<body>
<canvas id="particles"></canvas>
<a href="index.html" class="back-btn">返回主页</a>
<h1>香山 & 黄山 实时天气</h1>

<div class="container">
    <div class="card">
        <div class="location">北京 · 香山</div>
        <div class="current" id="xs-temp">--</div>
        <div class="info" id="xs-info">正在获取...</div>
        <div class="forecast" id="xs-forecast"></div>
    </div>
    <div class="card">
        <div class="location">安徽 · 黄山</div>
        <div class="current" id="hs-temp">--</div>
        <div class="info" id="hs-info">正在获取...</div>
        <div class="forecast" id="hs-forecast"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
particlesJS("particles",{particles:{number:{value:100},color:{value:"#ffffff"},opacity:{value:0.4},size:{value:3},move:{enable:true,speed:1}},interactivity:{events:{onhover:{enable:true,mode:"bubble"}}},retina_detect:true});

// Open-Meteo API（无需Key，全球免费）
function updateWeather(){
    // 香山 - 北京 (经纬度 39.99, 116.18)
    fetch('https://api.open-meteo.com/v1/forecast?latitude=39.99&longitude=116.18&current_weather=true&hourly=temperature_2m&timezone=Asia/Shanghai')
        .then(r => r.json())
        .then(d => {
            const w = d.current_weather;
            document.getElementById("xs-temp").innerHTML = Math.round(w.temperature) + "°C";
            document.getElementById("xs-info").innerHTML = "当前天气 • 风速 " + w.windspeed + " km/h";
            // 3小时预报 (简化版)
            let html = "";
            d.hourly.time.slice(0,3).forEach((time, i) => {
                const temp = Math.round(d.hourly.temperature_2m[i]);
                html += `<div class="day"><span>${new Date(time).toLocaleTimeString('zh-CN', {hour: '2-digit', minute: '2-digit'})}</span><span>${temp}°C</span></div>`;
            });
            document.getElementById("xs-forecast").innerHTML = html;
        });

    // 黄山 (经纬度 30.13, 118.17)
    fetch('https://api.open-meteo.com/v1/forecast?latitude=30.13&longitude=118.17&current_weather=true&hourly=temperature_2m&timezone=Asia/Shanghai')
        .then(r => r.json())
        .then(d => {
            const w = d.current_weather;
            document.getElementById("hs-temp").innerHTML = Math.round(w.temperature) + "°C";
            document.getElementById("hs-info").innerHTML = "当前天气 • 风速 " + w.windspeed + " km/h";
            let html = "";
            d.hourly.time.slice(0,3).forEach((time, i) => {
                const temp = Math.round(d.hourly.temperature_2m[i]);
                html += `<div class="day"><span>${new Date(time).toLocaleTimeString('zh-CN', {hour: '2-digit', minute: '2-digit'})}</span><span>${temp}°C</span></div>`;
            });
            document.getElementById("hs-forecast").innerHTML = html;
        });
}

// 立即加载 + 每30秒刷新
updateWeather();
setInterval(updateWeather, 30000);
</script>
</body>
</html>
